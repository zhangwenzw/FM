<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title></title>
    <link rel="stylesheet" href="css/show.css" />
    <link rel="stylesheet" href="css/iconfont.css" />
    <script src="js/zepto.min.js"></script>
    <script src="js/size.js"></script>
    <script src="js/touch.js"></script>
</head>
	<body>
		<header>
			<a href="list.html" class="iconfont">&#xe610;</a>
		</header>
		<div class="shadow"></div>
		<div class="bg">
			<span>每个人的青春里都有一条弯路</span>
			<span>收听 10578</span>
		</div>
		<audio src="audio/qingchun.mp3" autoplay="autoplay"></audio>
		<div class="btn">
			<div class="up iconfont">&#xe617;</div>
			<div class="center iconfont">&#xe61d;</div>
			<div class="down iconfont">&#xe627;</div>
			<div class="progress-time">-12.38</div>
			<div class="progress">
				<div class="progress-con"></div>
				<div class="progress-circle"></div>
			</div>
		</div>
		<div class="author">
			<div class="author-img"></div>
			<div class="author-center">
				<span>丸子</span>
				<span>圆圆的丸子 sina weibo 搜索：HeyyyDiear</span>
			</div>
			<div class="sixin iconfont">&#xe60f; 私信</div>
		</div>
		<footer>
			<div>
				<a href="gift.html"><span class="iconfont">&#xe61f;</span><br />送礼物</a>
			</div>
			<div>
				<a href="comment.html"><span class="iconfont">&#xe621;</span><br />评论 9</a>
			</div>
			<div>
				<a href="javascript:;"><span class="iconfont">&#xe623;</span><br />收藏 113</a>
			</div>
			<div>
				<a href="share.html"><span class="iconfont">&#xe679;</span><br />分享</a>
			</div>
			<div>
				<a href="javascript:;"><span class="iconfont">&#xe637;</span><br />更多</a>
				<ul class="foot-more">
					<li><span class="iconfont">&#xe6b7;</span>下载节目</li>
					<li><span class="iconfont">&#xe613;</span>阅读原文</li>
					<div class="foot-san"></div>
				</ul>
			</div>
			
		</footer>
	</body>
	<script>
		$("footer>div").click(function(){
			$(this).find("ul").toggle();
		})
		$("footer>div:nth-child(3)").click(function(){
			$(this).find("span").html("&#xe64d;");
		})
		
//		音乐
		var audio=document.querySelector("audio");
		var btnCircle=document.querySelector(".progress-circle");
		function getCurrentTime(id){ 
			console.log(parseInt(audio.currentTime) + '：秒');
		}
		function playOrPause(){
			if(audio.paused){
				audio.play();
			}else{
				audio.pause();
			}
		}
		$(".center").click(function(){
			playOrPause();
		})
		audio.addEventListener("timeupdate",function(){
			var allTime=audio.duration;
		    var currentTime=this.currentTime;
		    var bili=currentTime/allTime;
		    var lefts=($(".progress").width()-$(".progress-circle").width())*bili;
		    var widths=($(".progress").width())*bili;
		    var time=(currentTime-allTime)/60;
		    btnCircle.style.left=lefts+"px";
		    $(".progress-con").css({width:widths});
		    $(".progress-time").html(time.toFixed(2));
		});
		audio.addEventListener("loadedmetadata",function(){
		    this.play();
		});
		
		
//		拖拽按钮
//		var marginL;
//      touch.on("body","dragstart",".progress-circle",function(e){
//          marginL = parseInt($(".progress-circle").css("left"))?parseInt($(".progress-circle").css("left")):0;
//      });
//      touch.on("body","drag",".progress-circle",function(e){
//          $(".progress-circle").css({left:e.x+marginL})
//      });
//      touch.on("body","dragend",".progress-circle",function(e){
//      	$(".progress-circle").css({left:e.x+marginL})
//      	var currentTime1=(parseInt($(".progress-circle").css("left"))/($(".progress").width()-$("progress-circle").width()))*audio.duration;
//      	console.log(currentTime1)
//      	audio.currentTime=currentTime1;
//      })
	</script>
</html>
